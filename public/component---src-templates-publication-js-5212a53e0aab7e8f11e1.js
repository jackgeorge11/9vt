"use strict";(self.webpackChunk_9vtbackslash5=self.webpackChunk_9vtbackslash5||[]).push([[543],{6889:function(e,t,n){t.q=void 0;var r=l(n(7294)),a=l(n(3935)),o=l(n(5697));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=s(this,p(t).call(this,e))).state={isSdkReady:!1},n}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){"undefined"!=typeof window&&void 0!==window&&void 0===window.paypal?this.addPaypalSdk():"undefined"!=typeof window&&void 0!==window&&void 0!==window.paypal&&this.props.onButtonReady&&this.props.onButtonReady()}},{key:"createOrder",value:function(e,t){var n=this.props,r=n.currency,a=n.options,o=n.amount,l=n.shippingPreference;return t.order.create({purchase_units:[{amount:{currency_code:r||(a&&a.currency?a.currency:"USD"),value:o.toString()}}],application_context:{shipping_preference:l}})}},{key:"onApprove",value:function(e,t){var n=this;return t.order.capture().then((function(t){if(n.props.onSuccess)return n.props.onSuccess(t,e)})).catch((function(e){if(n.props.catchError)return n.props.catchError(e)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.amount,o=t.onSuccess,l=t.createOrder,c=t.createSubscription,u=t.onApprove,s=t.style;if(!this.state.isSdkReady&&("undefined"==typeof window||void 0===window.paypal))return null;var p=window.paypal.Buttons.driver("react",{React:r.default,ReactDOM:a.default}),d=n&&!l?function(t,n){return e.createOrder(t,n)}:function(e,t){return l(e,t)};return r.default.createElement(p,i({},this.props,{createOrder:c?void 0:d,createSubscription:c,onApprove:o?function(t,n){return e.onApprove(t,n)}:function(e,t){return u(e,t)},style:s}))}},{key:"addPaypalSdk",value:function(){var e=this,t=this.props,n=t.options,r=t.onButtonReady,a=[];Object.keys(n).forEach((function(e){var t=e.split(/(?=[A-Z])/).join("-").toLowerCase();a.push("".concat(t,"=").concat(n[e]))}));var o=document.createElement("script");o.type="text/javascript",o.src="https://www.paypal.com/sdk/js?".concat(a.join("&")),o.async=!0,o.onload=function(){e.setState({isSdkReady:!0}),r&&r()},o.onerror=function(){throw new Error("Paypal SDK could not be loaded.")},document.body.appendChild(o)}}])&&u(n.prototype,o),l&&u(n,l),t}(r.default.Component);t.q=f,m(f,"propTypes",{amount:o.default.oneOfType([o.default.number,o.default.string]),currency:o.default.oneOfType([o.default.number,o.default.string]),shippingPreference:o.default.string,onSuccess:o.default.func,catchError:o.default.func,onError:o.default.func,createOrder:o.default.func,createSubscription:o.default.func,onApprove:o.default.func,style:o.default.object,options:o.default.shape({clientId:o.default.string,merchantId:o.default.string,currency:o.default.oneOfType([o.default.number,o.default.string]),intent:o.default.string,commit:o.default.oneOfType([o.default.bool,o.default.string]),vault:o.default.oneOfType([o.default.bool,o.default.string]),component:o.default.string,disableFunding:o.default.string,disableCard:o.default.string,integrationDate:o.default.string,locale:o.default.string,buyerCountry:o.default.string,debug:o.default.oneOfType([o.default.bool,o.default.string])}),onButtonReady:o.default.func}),m(f,"defaultProps",{style:{},options:{clientId:"sb",currency:"USD"},shippingPreference:"GET_FROM_FILE"})},1873:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(7294),a=n(2349),o=n(2143),l=n(8945),c=n(6791),i=n(1597);function u(e){var t=e.children,n=e.src,u=e.alt,s=e.title,p=e.description,d=e.additional,m=e.scroller,f=(0,r.useContext)(c.d).color,h=(0,r.useState)(void 0),y=h[0],b=h[1],g=(0,r.useState)(void 0),E=g[0],v=g[1];return(0,r.useEffect)((function(){b(window.location.pathname),v(window.location.hash)}),[]),E?r.createElement("div",{className:"zoom",style:{backgroundColor:f}},r.createElement("div",{className:"image"},r.createElement(l.G,{image:n,alt:u})),r.createElement("div",{className:"back"},r.createElement("h2",null,r.createElement(i.Link,{className:"thick under pointer",to:y},"click here")," ","to go back to the details."))):r.createElement(a.Z,{page:"catalogue",title:s,description:p,additional:d},r.createElement("div",{className:"product"},r.createElement(i.Link,{className:"image image-desktop pointer",to:y+"#zoom"},r.createElement(l.G,{image:n,alt:u})),r.createElement(o.Z,{className:"small",scroller:m},t)))}},7508:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var r,a,o=n(1597),l=n(8945),c=n(7294),i=n(1873),u=n(8872),s=n(1394),p=n(6791),d=n(6889),m=n(3964),f=n.n(m),h=function(e){var t=e.children;return c.createElement("span",{className:"bold"},t)},y=function(e){var t=e.children;return c.createElement("p",{className:"align-center"},t)},b={renderMark:(r={},r[s.oN.BOLD]=function(e){return c.createElement(h,null,e)},r),renderNode:(a={},a[s.RG.PARAGRAPH]=function(e,t){return c.createElement(y,null,t)},a[s.RG.EMBEDDED_ASSET]=function(e){return c.createElement(c.Fragment,null,c.createElement("h2",null,"Embedded Asset"),c.createElement("pre",null,c.createElement("code",null,JSON.stringify(e,null,2))))},a)},g=function(e,t){if(e&&t||0===e&&t){var n=(e/100).toFixed(2);return new Intl.NumberFormat(["en-US"],{style:"currency",currency:t,currencyDisplay:"symbol"}).format(n)}};function E(e){var t,n,r=e.data,a=null==r||null===(t=r.allContentfulPublication)||void 0===t||null===(n=t.nodes)||void 0===n?void 0:n[0],s=null==a?void 0:a.description,m=(0,l.d)(null==a?void 0:a.cover),h=(0,c.useContext)(p.d),y=h.loading,E=(h.setLoading,(0,c.useState)(void 0)),v=E[0],S=E[1],w=(0,c.useState)(a.price+a.price*a.tax),k=w[0],N=w[1],O=(0,c.useState)(a.price),D=O[0],_=O[1],j=(0,c.useState)({quantity:1,shipping:"Select"}),P=j[0],x=j[1],R=function(e){e.preventDefault(),x((function(t){var n;return Object.assign({},t,((n={})[e.target.name]=e.target.value,n))})),console.log(P)};(0,c.useEffect)((function(){_(a.price*Number(P.quantity))}),[P.quantity]),(0,c.useEffect)((function(){N(D+D*a.tax+("Select"!==P.shipping?JSON.parse(a.shipping[Number(P.shipping)].internal.content).cost:0))}),[P.shipping,D]);var C=(0,c.useRef)(),T=(0,c.useRef)(),A=(0,c.useState)(!1),F=A[0],U=A[1];return c.createElement(i.Z,{src:m,alt:a.title+" cover",title:a.title+", by "+a.author,description:a.title+", by "+a.author+". "+(a.genre?a.genre+" published in "+a.format+".":"published in "+a.format+".")+" "+g(a.price,"USD")+".",scroller:T},y?c.createElement("h2",{className:"--muted loading"},"(loading)"):v?c.createElement(c.Fragment,null,c.createElement("h2",null,v),c.createElement("h2",null,"nearly 100% of proceeds go to the author(s)."),c.createElement("h2",null,"if you have any questions about your purchase, email us at"," ",c.createElement("a",{href:"mailto:transactions@9vtbackslash5.com"},"transactions@9vtbackslash5.com"),"."),c.createElement("h2",{className:"ta-right"},c.createElement(o.Link,{to:"/catalogue"},"click here")," to navigate back to our catalogue."),c.createElement("h2",{className:"ta-right"},"or"," ",c.createElement("a",{href:"https://instagram.com/9vtbackslash5",target:"_blank",rel:"noopener noreferrer"},"click here")," ","to checkout our Instagram.")):c.createElement(c.Fragment,null,c.createElement("h1",{className:"italic title"},a.title),c.createElement("h2",{className:"--muted ta-right author"},"by ",a.author),s&&(0,u.Z)(s,b),c.createElement("div",{className:"image image-mobile"},c.createElement(l.G,{image:m,alt:a.title+" cover"})),a.copies&&c.createElement("h2",{className:"--muted"},"this edition is limited to ",a.copies," copies."),a.soldOut?c.createElement("h2",{className:"--muted"},"this publication is sold out"):a.saleEnded?c.createElement("h2",{className:"--muted"},"sales for this publication have ended"):c.createElement(c.Fragment,null,a.preorder&&f()(a.preorderShipDate).isAfter(f()())&&c.createElement("h2",{className:"--muted"},"this publication will ship from"," ",f()(a.preorderShipDate).format("MMMM Do")),c.createElement("h1",null,a.preorder&&f()(a.preorderShipDate).isAfter(f()())?"preorder":"purchase"," ","this publication"),c.createElement("h2",{className:"breakdown"},"cost: ",c.createElement("span",null,g(a.price,"USD"))),c.createElement("h2",{className:"breakdown"},"quantity:"," ",c.createElement("select",{name:"quantity",value:P.quantity,onChange:R},c.createElement("option",{value:1},"1"),c.createElement("option",{value:2},"2"),c.createElement("option",{value:3},"3"))),c.createElement("h2",{className:"breakdown"},"subtotal: ",c.createElement("span",null,g(D,"USD"))),c.createElement("h2",{className:"breakdown"},"tax: ",c.createElement("span",null,100*a.tax,"%")),c.createElement("h2",{className:F?"breakdown thick --warning":"breakdown",ref:C,onClick:function(){return console.log(C,T)}},"shipping:"," ",c.createElement("select",{name:"shipping",onChange:R,defaultValue:"Select",className:F?"--warning":""},c.createElement("option",{value:"Select",disabled:!0},"Select"),a.shipping.map((function(e,t){var n=JSON.parse(e.internal.content);return c.createElement("option",{value:t},g(n.cost,"USD")," ~ shipping to"," ",n.to)})))),c.createElement("h2",{className:"breakdown"},"total: ",c.createElement("span",null,g(k,"USD"))),c.createElement("div",{className:"paypal-btn-wrapper"},c.createElement(d.q,{style:{color:"black"},options:{clientId:"AdracerWWfFWyetVtP-i2c2qb2RV0WQYLX2TKQShPh7s9bxQrtD1pyadLNTQ27VEWGZz4ydTjnqjja0j"},currency:"USD",onError:function(e){"Select"===P.shipping?alert("Please select shipping."):console.log(e)},createOrder:function(e,t){if("Select"===P.shipping){var n;if(null!=T&&T.current)U(!0),T.current.scrollTop=(null==C||null===(n=C.current)||void 0===n?void 0:n.offsetTop)-10;return null}return t.order.create({purchase_units:[{amount:{currency_code:"USD",value:(k/100).toFixed(2),breakdown:{item_total:{currency_code:"USD",value:(D/100).toFixed(2)},shipping:{currency_code:"USD",value:(JSON.parse(a.shipping[Number(P.shipping)].internal.content).cost/100).toFixed(2)},tax_total:{currency_code:"USD",value:(D*a.tax/100).toFixed(2)}}},items:[{unit_amount:{currency_code:"USD",value:String((a.price/100).toFixed(2))},quantity:P.quantity,name:a.title,description:a.blurb?a.blurb:""}]}]})},onApprove:function(e,t){return t.order.capture().then((function(e){S("Thanks for your purchase, "+e.payer.name.given_name+".")}))}}))),c.createElement("h1",null,"details"),a.editors&&c.createElement("h2",{className:"m-0"},"edited by ",a.editors),a.typesetting&&c.createElement("h2",{className:"m-0"},"typesetting by ",a.typesetting),a.coverDesign&&c.createElement("h2",{className:"m-0"},"cover design by ",a.coverDesign),a.artwork&&c.createElement("h2",{className:"m-0"},"artwork by ",a.artwork),a.publisher&&c.createElement("h2",{className:"m-0"},"printed by ",a.publisher),a.releaseDate&&c.createElement("h2",{className:"m-0"},"published in ",a.releaseDate),a.genre&&c.createElement("h2",{className:"m-0"},a.genre),a.format&&c.createElement("h2",{className:"m-0"},a.format),a.pageCount&&c.createElement("h2",{className:"m-0"},a.pageCount," pages"),a.isbn&&c.createElement("h2",{className:"m-0"},"ISBN: ",a.isbn),a.price&&c.createElement("h2",{className:"m-0"},g(a.price,"USD")),a.copies&&c.createElement("h2",{className:"m-0"},"limited to ",a.copies," copies"),a.soldOut&&c.createElement("h2",{className:"m-0 --muted"},"this publication is sold out"),a.saleEnded&&c.createElement("h2",{className:"m-0 --muted"},"sales for this publication have ended"),c.createElement("h2",{className:"ta-right"},c.createElement(o.Link,{to:"/catalogue"},"click here")," to navigate back to our catalogue.")))}}}]);
//# sourceMappingURL=component---src-templates-publication-js-5212a53e0aab7e8f11e1.js.map