"use strict";(self.webpackChunk_9vtbackslash5=self.webpackChunk_9vtbackslash5||[]).push([[543],{1873:function(e,t,a){a.d(t,{Z:function(){return u}});var l=a(7294),n=a(2349),r=a(2143),c=a(8945),i=a(6791),s=a(1597),o=a(9111),m="undefined"!=typeof window;function u(e){var t=e.children,a=e.src,u=e.alt,d=e.title,p=e.description,h=e.canonical,E=e.additional,g=e.scroller,f=e.crumbs,N=(0,l.useContext)(i.d).color,b=(0,l.useState)(void 0),v=b[0],y=b[1],k=(0,l.useState)(void 0),S=k[0],w=k[1],D=void 0,C=void 0;return m&&(D=window.location.pathname,C=window.location.hash),(0,l.useEffect)((function(){y(D),w(C)}),[D,C]),S?l.createElement("div",{className:"zoom",style:{backgroundColor:N}},l.createElement("div",{className:"image"},l.createElement(c.G,{image:a,alt:u})),l.createElement("div",{className:"back"},l.createElement("h2",null,l.createElement(s.Link,{className:"thick under pointer",to:v},"click here")," ","to go back to the details."))):l.createElement(n.Z,{page:"catalogue",title:d,description:p,canonical:h,additional:E},l.createElement("main",{className:"product"},l.createElement(s.Link,{className:"image image-desktop pointer",to:v+"#zoom"},l.createElement(c.G,{image:a,alt:u})),l.createElement("div",{className:"product-window-wrapper"},l.createElement(o.Z,{crumbs:f,className:"small"}),l.createElement(r.Z,{className:"small",scroller:g,article:!0},t))))}},7508:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var l,n,r=a(1597),c=a(8945),i=a(7294),s=a(1873),o=a(8872),m=a(1394),u=a(6791),d=a(7841),p=a(3964),h=a.n(p),E=function(e){var t=e.children;return i.createElement("span",{className:"bold"},t)},g=function(e){var t=e.children;return i.createElement("p",{className:"align-center"},t)},f={renderMark:(l={},l[m.oN.BOLD]=function(e){return i.createElement(E,null,e)},l),renderNode:(n={},n[m.RG.PARAGRAPH]=function(e,t){return i.createElement(g,null,t)},n[m.RG.EMBEDDED_ASSET]=function(e){return i.createElement(i.Fragment,null,i.createElement("h2",null,"Embedded Asset"),i.createElement("pre",null,i.createElement("code",null,JSON.stringify(e,null,2))))},n)},N=function(e,t){if(e&&t||0===e&&t){var a=(e/100).toFixed(2);return new Intl.NumberFormat(["en-US"],{style:"currency",currency:t,currencyDisplay:"symbol"}).format(a)}};function b(e){var t,a,l=e.data,n=null==l||null===(t=l.allContentfulPublication)||void 0===t||null===(a=t.nodes)||void 0===a?void 0:a[0],m=null==n?void 0:n.description,p=(0,c.d)(null==n?void 0:n.cover),E=(0,i.useContext)(u.d).loading,g=(0,i.useContext)(d.A),b=g.addCartItems,v=g.cart,y=(0,i.useState)(n.price+n.price*n.tax),k=(y[0],y[1]),S=(0,i.useState)(n.price),w=S[0],D=S[1],C=(0,i.useState)({quantity:1,shipping:"Select"}),x=C[0];C[1];(0,i.useEffect)((function(){D(n.price*Number(x.quantity))}),[x.quantity]),(0,i.useEffect)((function(){k(w+w*n.tax+("Select"!==x.shipping?JSON.parse(n.shipping[Number(x.shipping)].internal.content).cost*x.quantity:0))}),[x.shipping,w]);var A=(0,i.useRef)();return i.createElement(s.Z,{src:p,alt:n.title+" cover",title:n.title+", by "+n.author,description:n.title+", by "+n.author+". "+(n.genre?n.genre+" published in "+n.format+".":"published in "+n.format+".")+" "+N(n.price,"USD")+".",canonical:n.slug,scroller:A,crumbs:[{title:"catalogue",slug:"/catalogue"},{title:n.title,slug:"/catalogue/"+n.slug}]},E?i.createElement("h2",{className:"--muted loading"},"(loading)"):i.createElement(i.Fragment,null,i.createElement("div",{className:"product-header"},!n.soldOut&&!n.saleEnded&&(n.preorder&&!h()(n.preorderShipDate).isAfter(h()())||!h()(n.releaseDate).isAfter(h()()))&&i.createElement(i.Fragment,null,null!=v&&v.some((function(e){return e.slug===n.slug}))?i.createElement(r.Link,{className:"button disarm",to:"/cart"},i.createElement("h4",null,v.filter((function(e){return e.slug===n.slug}))[0].quantity," ","in cart")):i.createElement("button",{onClick:function(){return b({quantity:1,maxQuantity:5,slug:n.slug,url:"/catalogue/"+n.slug,type:n.sys.type,price:n.price,tax:n.tax,title:n.title,author:n.author,image:p||void 0,shipping:n.shipping,preorder:n.preorder,preorderShipDate:n.preorderShipDate})}},i.createElement("h4",null,"add to cart"))),i.createElement("h1",{className:"italic title"},n.title)),i.createElement("h2",{className:"--muted ta-right author"},"by ",n.author),m&&(0,o.Z)(m,f),i.createElement("div",{className:"image image-mobile"},i.createElement(c.G,{image:p,alt:n.title+" cover"})),n.copies&&i.createElement("h2",{className:"--muted"},"this edition is limited to ",n.copies," copies."),i.createElement("h1",null,"details"),n.editors&&i.createElement("h2",{className:"m-0"},"edited by ",n.editors),n.typesetting&&i.createElement("h2",{className:"m-0"},"typesetting by ",n.typesetting),n.coverDesign&&i.createElement("h2",{className:"m-0"},"cover design by ",n.coverDesign),n.artwork&&i.createElement("h2",{className:"m-0"},"artwork by ",n.artwork),n.publisher&&i.createElement("h2",{className:"m-0"},"printed by ",n.publisher),n.releaseDate&&i.createElement("h2",{className:"m-0"},"published in ",n.releaseDate),n.genre&&i.createElement("h2",{className:"m-0"},n.genre),n.format&&i.createElement("h2",{className:"m-0"},n.format),n.pageCount&&i.createElement("h2",{className:"m-0"},n.pageCount," pages"),n.isbn&&i.createElement("h2",{className:"m-0"},"ISBN: ",n.isbn),n.price&&i.createElement("h2",{className:"m-0"},N(n.price,"USD")),n.copies&&i.createElement("h2",{className:"m-0"},"limited to ",n.copies," copies"),n.soldOut&&i.createElement("h2",{className:"m-0 --muted"},"this publication is sold out"),n.saleEnded&&i.createElement("h2",{className:"m-0 --muted"},"sales for this publication have ended"),i.createElement("h2",{className:"ta-right"},i.createElement(r.Link,{to:"/catalogue"},"click here")," to navigate back to our catalogue.")))}}}]);
//# sourceMappingURL=component---src-templates-publication-js-88d7043e363fc61d1b3d.js.map