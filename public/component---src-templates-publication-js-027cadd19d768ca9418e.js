"use strict";(self.webpackChunk_9vtbackslash5=self.webpackChunk_9vtbackslash5||[]).push([[543],{6889:function(e,t,n){t.q=void 0;var a=l(n(7294)),r=l(n(3935)),o=l(n(5697));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i.apply(this,arguments)}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=s(this,d(t).call(this,e))).state={isSdkReady:!1},n}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){"undefined"!=typeof window&&void 0!==window&&void 0===window.paypal?this.addPaypalSdk():"undefined"!=typeof window&&void 0!==window&&void 0!==window.paypal&&this.props.onButtonReady&&this.props.onButtonReady()}},{key:"createOrder",value:function(e,t){var n=this.props,a=n.currency,r=n.options,o=n.amount,l=n.shippingPreference;return t.order.create({purchase_units:[{amount:{currency_code:a||(r&&r.currency?r.currency:"USD"),value:o.toString()}}],application_context:{shipping_preference:l}})}},{key:"onApprove",value:function(e,t){var n=this;return t.order.capture().then((function(t){if(n.props.onSuccess)return n.props.onSuccess(t,e)})).catch((function(e){if(n.props.catchError)return n.props.catchError(e)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.amount,o=t.onSuccess,l=t.createOrder,c=t.createSubscription,u=t.onApprove,s=t.style;if(!this.state.isSdkReady&&("undefined"==typeof window||void 0===window.paypal))return null;var d=window.paypal.Buttons.driver("react",{React:a.default,ReactDOM:r.default}),p=n&&!l?function(t,n){return e.createOrder(t,n)}:function(e,t){return l(e,t)};return a.default.createElement(d,i({},this.props,{createOrder:c?void 0:p,createSubscription:c,onApprove:o?function(t,n){return e.onApprove(t,n)}:function(e,t){return u(e,t)},style:s}))}},{key:"addPaypalSdk",value:function(){var e=this,t=this.props,n=t.options,a=t.onButtonReady,r=[];Object.keys(n).forEach((function(e){var t=e.split(/(?=[A-Z])/).join("-").toLowerCase();r.push("".concat(t,"=").concat(n[e]))}));var o=document.createElement("script");o.type="text/javascript",o.src="https://www.paypal.com/sdk/js?".concat(r.join("&")),o.async=!0,o.onload=function(){e.setState({isSdkReady:!0}),a&&a()},o.onerror=function(){throw new Error("Paypal SDK could not be loaded.")},document.body.appendChild(o)}}])&&u(n.prototype,o),l&&u(n,l),t}(a.default.Component);t.q=f,m(f,"propTypes",{amount:o.default.oneOfType([o.default.number,o.default.string]),currency:o.default.oneOfType([o.default.number,o.default.string]),shippingPreference:o.default.string,onSuccess:o.default.func,catchError:o.default.func,onError:o.default.func,createOrder:o.default.func,createSubscription:o.default.func,onApprove:o.default.func,style:o.default.object,options:o.default.shape({clientId:o.default.string,merchantId:o.default.string,currency:o.default.oneOfType([o.default.number,o.default.string]),intent:o.default.string,commit:o.default.oneOfType([o.default.bool,o.default.string]),vault:o.default.oneOfType([o.default.bool,o.default.string]),component:o.default.string,disableFunding:o.default.string,disableCard:o.default.string,integrationDate:o.default.string,locale:o.default.string,buyerCountry:o.default.string,debug:o.default.oneOfType([o.default.bool,o.default.string])}),onButtonReady:o.default.func}),m(f,"defaultProps",{style:{},options:{clientId:"sb",currency:"USD"},shippingPreference:"GET_FROM_FILE"})},1873:function(e,t,n){n.d(t,{Z:function(){return d}});var a=n(7294),r=n(2349),o=n(2143),l=n(8945),c=n(6791),i=n(1597),u=n(9111),s="undefined"!=typeof window;function d(e){var t=e.children,n=e.src,d=e.alt,p=e.title,m=e.description,f=e.canonical,h=e.additional,y=e.scroller,b=e.crumbs,g=(0,a.useContext)(c.d).color,E=(0,a.useState)(void 0),v=E[0],w=E[1],S=(0,a.useState)(void 0),N=S[0],k=S[1],O=void 0,D=void 0;return s&&(O=window.location.pathname,D=window.location.hash),(0,a.useEffect)((function(){w(O),k(D)}),[O,D]),console.log(v,N),N?a.createElement("div",{className:"zoom",style:{backgroundColor:g}},a.createElement("div",{className:"image"},a.createElement(l.G,{image:n,alt:d})),a.createElement("div",{className:"back"},a.createElement("h2",null,a.createElement(i.Link,{className:"thick under pointer",to:v},"click here")," ","to go back to the details."))):a.createElement(r.Z,{page:"catalogue",title:p,description:m,canonical:f,additional:h},a.createElement("main",{className:"product"},a.createElement(i.Link,{className:"image image-desktop pointer",to:v+"#zoom"},a.createElement(l.G,{image:n,alt:d})),a.createElement("div",{className:"product-window-wrapper"},a.createElement(u.Z,{crumbs:b,className:"small"}),a.createElement(o.Z,{className:"small",scroller:y,article:!0},t))))}},7508:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var a,r,o=n(1597),l=n(8945),c=n(7294),i=n(1873),u=n(8872),s=n(1394),d=n(6791),p=n(6889),m=n(3964),f=n.n(m),h=function(e){var t=e.children;return c.createElement("span",{className:"bold"},t)},y=function(e){var t=e.children;return c.createElement("p",{className:"align-center"},t)},b={renderMark:(a={},a[s.oN.BOLD]=function(e){return c.createElement(h,null,e)},a),renderNode:(r={},r[s.RG.PARAGRAPH]=function(e,t){return c.createElement(y,null,t)},r[s.RG.EMBEDDED_ASSET]=function(e){return c.createElement(c.Fragment,null,c.createElement("h2",null,"Embedded Asset"),c.createElement("pre",null,c.createElement("code",null,JSON.stringify(e,null,2))))},r)},g=function(e,t){if(e&&t||0===e&&t){var n=(e/100).toFixed(2);return new Intl.NumberFormat(["en-US"],{style:"currency",currency:t,currencyDisplay:"symbol"}).format(n)}};function E(e){var t,n,a=e.data,r=null==a||null===(t=a.allContentfulPublication)||void 0===t||null===(n=t.nodes)||void 0===n?void 0:n[0],s=null==r?void 0:r.description,m=(0,l.d)(null==r?void 0:r.cover),h=(0,c.useContext)(d.d),y=h.loading,E=(h.setLoading,(0,c.useState)(void 0)),v=E[0],w=E[1],S=(0,c.useState)(r.price+r.price*r.tax),N=S[0],k=S[1],O=(0,c.useState)(r.price),D=O[0],_=O[1],j=(0,c.useState)({quantity:1,shipping:"Select"}),P=j[0],x=j[1],R=function(e){e.preventDefault(),x((function(t){var n;return Object.assign({},t,((n={})[e.target.name]=e.target.value,n))}))};(0,c.useEffect)((function(){_(r.price*Number(P.quantity))}),[P.quantity]),(0,c.useEffect)((function(){k(D+D*r.tax+("Select"!==P.shipping?JSON.parse(r.shipping[Number(P.shipping)].internal.content).cost*P.quantity:0))}),[P.shipping,D]);var T=(0,c.useRef)(),C=(0,c.useRef)(),q=(0,c.useRef)(),A=(0,c.useState)(!1),F=A[0],U=A[1];return c.createElement(i.Z,{src:m,alt:r.title+" cover",title:r.title+", by "+r.author,description:r.title+", by "+r.author+". "+(r.genre?r.genre+" published in "+r.format+".":"published in "+r.format+".")+" "+g(r.price,"USD")+".",canonical:r.slug,scroller:T,crumbs:[{title:"catalogue",slug:"/catalogue"},{title:r.title,slug:"/catalogue/"+r.slug}]},y?c.createElement("h2",{className:"--muted loading"},"(loading)"):v?c.createElement(c.Fragment,null,c.createElement("h2",null,v),c.createElement("h2",null,"nearly 100% of proceeds go to the author(s)."),c.createElement("h2",null,"if you have any questions about your purchase, email us at"," ",c.createElement("a",{href:"mailto:transactions@9vtbackslash5.com"},"transactions@9vtbackslash5.com"),"."),c.createElement("h2",{className:"ta-right"},c.createElement(o.Link,{to:"/catalogue"},"click here")," to navigate back to our catalogue."),c.createElement("h2",{className:"ta-right"},"or"," ",c.createElement("a",{href:"https://instagram.com/9vtbackslash5",target:"_blank",rel:"noopener noreferrer nofollow"},"click here")," ","to checkout our Instagram.")):c.createElement(c.Fragment,null,c.createElement("div",{className:"product-header"},c.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},r.soldOut||r.saleEnded||r.preorder&&!f()(r.preorderShipDate).isAfter(f()())&&c.createElement("button",{className:"end",onClick:function(){var e;return T.current.scrollTop=(null==C||null===(e=C.current)||void 0===e?void 0:e.offsetTop)-10}},c.createElement("h3",null,"purchase")),c.createElement("h1",{className:"italic title"},r.title)),c.createElement("h2",{className:"--muted ta-right author"},"by ",r.author)),s&&(0,u.Z)(s,b),c.createElement("div",{className:"image image-mobile"},c.createElement(l.G,{image:m,alt:r.title+" cover"})),r.copies&&c.createElement("h2",{className:"--muted"},"this edition is limited to ",r.copies," copies."),r.soldOut?c.createElement("h2",{className:"--muted"},"this publication is sold out"):r.saleEnded?c.createElement("h2",{className:"--muted"},"sales for this publication have ended"):c.createElement(c.Fragment,null,r.preorder&&f()(r.preorderShipDate).isAfter(f()())&&c.createElement("h2",{className:"--muted"},"this publication will ship from"," ",f()(r.preorderShipDate).format("MMMM Do")),c.createElement("h1",{ref:C},r.preorder&&f()(r.preorderShipDate).isAfter(f()())?"preorder":"purchase"," ","this publication"),c.createElement("h2",{className:"breakdown"},"cost: ",c.createElement("span",null,g(r.price,"USD"))),c.createElement("h2",{className:"breakdown"},"quantity:"," ",c.createElement("select",{name:"quantity",value:P.quantity,onChange:R},c.createElement("option",{value:1},"1"),c.createElement("option",{value:2},"2"),c.createElement("option",{value:3},"3"))),c.createElement("h2",{className:"breakdown"},"subtotal: ",c.createElement("span",null,g(D,"USD"))),c.createElement("h2",{className:"breakdown"},"tax: ",c.createElement("span",null,100*r.tax,"%")),c.createElement("h2",{className:F?"breakdown thick --warning":"breakdown",ref:q},"shipping:"," ",c.createElement("select",{name:"shipping",onChange:R,defaultValue:"Select",className:F?"--warning":""},c.createElement("option",{value:"Select",disabled:!0},"Select"),r.shipping.map((function(e,t){var n=JSON.parse(e.internal.content);return c.createElement("option",{value:t},g(n.cost,"USD")," ~ shipping to"," ",n.to)})))),c.createElement("h2",{className:"breakdown"},"total: ",c.createElement("span",null,g(N,"USD"))),c.createElement("div",{className:"paypal-btn-wrapper"},c.createElement(p.q,{style:{color:"black"},options:{clientId:"AdracerWWfFWyetVtP-i2c2qb2RV0WQYLX2TKQShPh7s9bxQrtD1pyadLNTQ27VEWGZz4ydTjnqjja0j"},currency:"USD",onError:function(e){"Select"===P.shipping?alert("Please select shipping."):console.log(e)},createOrder:function(e,t){if("Select"===P.shipping){var n;if(null!=T&&T.current)U(!0),T.current.scrollTop=(null==q||null===(n=q.current)||void 0===n?void 0:n.offsetTop)-10;return null}return t.order.create({purchase_units:[{amount:{currency_code:"USD",value:(N/100).toFixed(2),breakdown:{item_total:{currency_code:"USD",value:(D/100).toFixed(2)},shipping:{currency_code:"USD",value:(JSON.parse(r.shipping[Number(P.shipping)].internal.content).cost*P.quantity/100).toFixed(2)},tax_total:{currency_code:"USD",value:(D*r.tax/100).toFixed(2)}}},items:[{unit_amount:{currency_code:"USD",value:String((r.price/100).toFixed(2))},quantity:P.quantity,name:r.title,description:r.blurb?r.blurb:""}]}]})},onApprove:function(e,t){return t.order.capture().then((function(e){w("Thanks for your purchase, "+e.payer.name.given_name+".")}))}}))),c.createElement("h1",null,"details"),r.editors&&c.createElement("h2",{className:"m-0"},"edited by ",r.editors),r.typesetting&&c.createElement("h2",{className:"m-0"},"typesetting by ",r.typesetting),r.coverDesign&&c.createElement("h2",{className:"m-0"},"cover design by ",r.coverDesign),r.artwork&&c.createElement("h2",{className:"m-0"},"artwork by ",r.artwork),r.publisher&&c.createElement("h2",{className:"m-0"},"printed by ",r.publisher),r.releaseDate&&c.createElement("h2",{className:"m-0"},"published in ",r.releaseDate),r.genre&&c.createElement("h2",{className:"m-0"},r.genre),r.format&&c.createElement("h2",{className:"m-0"},r.format),r.pageCount&&c.createElement("h2",{className:"m-0"},r.pageCount," pages"),r.isbn&&c.createElement("h2",{className:"m-0"},"ISBN: ",r.isbn),r.price&&c.createElement("h2",{className:"m-0"},g(r.price,"USD")),r.copies&&c.createElement("h2",{className:"m-0"},"limited to ",r.copies," copies"),r.soldOut&&c.createElement("h2",{className:"m-0 --muted"},"this publication is sold out"),r.saleEnded&&c.createElement("h2",{className:"m-0 --muted"},"sales for this publication have ended"),c.createElement("h2",{className:"ta-right"},c.createElement(o.Link,{to:"/catalogue"},"click here")," to navigate back to our catalogue.")))}}}]);
//# sourceMappingURL=component---src-templates-publication-js-027cadd19d768ca9418e.js.map