"use strict";(self.webpackChunk_9vtbackslash5=self.webpackChunk_9vtbackslash5||[]).push([[543],{6889:function(e,t,n){t.q=void 0;var a=c(n(7294)),r=c(n(3935)),o=c(n(5697));function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i.apply(this,arguments)}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=s(this,p(t).call(this,e))).state={isSdkReady:!1},n}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){"undefined"!=typeof window&&void 0!==window&&void 0===window.paypal?this.addPaypalSdk():"undefined"!=typeof window&&void 0!==window&&void 0!==window.paypal&&this.props.onButtonReady&&this.props.onButtonReady()}},{key:"createOrder",value:function(e,t){var n=this.props,a=n.currency,r=n.options,o=n.amount,c=n.shippingPreference;return t.order.create({purchase_units:[{amount:{currency_code:a||(r&&r.currency?r.currency:"USD"),value:o.toString()}}],application_context:{shipping_preference:c}})}},{key:"onApprove",value:function(e,t){var n=this;return t.order.capture().then((function(t){if(n.props.onSuccess)return n.props.onSuccess(t,e)})).catch((function(e){if(n.props.catchError)return n.props.catchError(e)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.amount,o=t.onSuccess,c=t.createOrder,l=t.createSubscription,u=t.onApprove,s=t.style;if(!this.state.isSdkReady&&("undefined"==typeof window||void 0===window.paypal))return null;var p=window.paypal.Buttons.driver("react",{React:a.default,ReactDOM:r.default}),d=n&&!c?function(t,n){return e.createOrder(t,n)}:function(e,t){return c(e,t)};return a.default.createElement(p,i({},this.props,{createOrder:l?void 0:d,createSubscription:l,onApprove:o?function(t,n){return e.onApprove(t,n)}:function(e,t){return u(e,t)},style:s}))}},{key:"addPaypalSdk",value:function(){var e=this,t=this.props,n=t.options,a=t.onButtonReady,r=[];Object.keys(n).forEach((function(e){var t=e.split(/(?=[A-Z])/).join("-").toLowerCase();r.push("".concat(t,"=").concat(n[e]))}));var o=document.createElement("script");o.type="text/javascript",o.src="https://www.paypal.com/sdk/js?".concat(r.join("&")),o.async=!0,o.onload=function(){e.setState({isSdkReady:!0}),a&&a()},o.onerror=function(){throw new Error("Paypal SDK could not be loaded.")},document.body.appendChild(o)}}])&&u(n.prototype,o),c&&u(n,c),t}(a.default.Component);t.q=f,m(f,"propTypes",{amount:o.default.oneOfType([o.default.number,o.default.string]),currency:o.default.oneOfType([o.default.number,o.default.string]),shippingPreference:o.default.string,onSuccess:o.default.func,catchError:o.default.func,onError:o.default.func,createOrder:o.default.func,createSubscription:o.default.func,onApprove:o.default.func,style:o.default.object,options:o.default.shape({clientId:o.default.string,merchantId:o.default.string,currency:o.default.oneOfType([o.default.number,o.default.string]),intent:o.default.string,commit:o.default.oneOfType([o.default.bool,o.default.string]),vault:o.default.oneOfType([o.default.bool,o.default.string]),component:o.default.string,disableFunding:o.default.string,disableCard:o.default.string,integrationDate:o.default.string,locale:o.default.string,buyerCountry:o.default.string,debug:o.default.oneOfType([o.default.bool,o.default.string])}),onButtonReady:o.default.func}),m(f,"defaultProps",{style:{},options:{clientId:"sb",currency:"USD"},shippingPreference:"GET_FROM_FILE"})},1873:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(7294),r=n(2349),o=n(2143),c=n(8945),l=n(6791),i=n(1597);function u(e){var t=e.children,n=e.src,u=e.alt,s=e.title,p=e.description,d=e.additional,m=(0,a.useContext)(l.d).color,f=(0,a.useState)(void 0),h=f[0],y=f[1],b=(0,a.useState)(void 0),g=b[0],E=b[1];return(0,a.useEffect)((function(){y(window.location.pathname),E(window.location.hash)}),[]),g?a.createElement("div",{className:"zoom",style:{backgroundColor:m}},a.createElement("div",{className:"image"},a.createElement(c.G,{image:n,alt:u})),a.createElement("div",{className:"back"},a.createElement("h2",null,a.createElement(i.Link,{className:"thick under pointer",to:h},"click here")," ","to go back to the details."))):a.createElement(r.Z,{page:"catalogue",title:s,description:p,additional:d},a.createElement("div",{className:"product"},a.createElement(i.Link,{className:"image image-desktop pointer",to:h+"#zoom"},a.createElement(c.G,{image:n,alt:u})),a.createElement(o.Z,{className:"small"},t)))}},7508:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var a,r,o=n(1597),c=n(8945),l=n(7294),i=n(1873),u=n(8872),s=n(1394),p=n(6791),d=n(6889),m=n(3964),f=n.n(m),h=function(e){var t=e.children;return l.createElement("span",{className:"bold"},t)},y=function(e){var t=e.children;return l.createElement("p",{className:"align-center"},t)},b={renderMark:(a={},a[s.oN.BOLD]=function(e){return l.createElement(h,null,e)},a),renderNode:(r={},r[s.RG.PARAGRAPH]=function(e,t){return l.createElement(y,null,t)},r[s.RG.EMBEDDED_ASSET]=function(e){return l.createElement(l.Fragment,null,l.createElement("h2",null,"Embedded Asset"),l.createElement("pre",null,l.createElement("code",null,JSON.stringify(e,null,2))))},r)},g=function(e,t){if(e&&t||0===e&&t){var n=(e/100).toFixed(2);return new Intl.NumberFormat(["en-US"],{style:"currency",currency:t,currencyDisplay:"symbol"}).format(n)}};function E(e){var t,n,a=e.data,r=null==a||null===(t=a.allContentfulPublication)||void 0===t||null===(n=t.nodes)||void 0===n?void 0:n[0],s=null==r?void 0:r.description,m=(0,c.d)(null==r?void 0:r.cover),h=(0,l.useContext)(p.d),y=h.loading,E=(h.setLoading,(0,l.useState)(void 0)),v=E[0],S=E[1],w=(0,l.useState)(r.price+r.price*r.tax),N=w[0],k=w[1],O=(0,l.useState)(r.price),D=O[0],_=O[1],j=(0,l.useState)({quantity:1,shipping:"Select"}),P=j[0],x=j[1],C=function(e){e.preventDefault(),x((function(t){var n;return Object.assign({},t,((n={})[e.target.name]=e.target.value,n))})),console.log(P)};return(0,l.useEffect)((function(){_(r.price*Number(P.quantity))}),[P.quantity]),(0,l.useEffect)((function(){k(D+D*r.tax+("Select"!==P.shipping?JSON.parse(r.shipping[Number(P.shipping)].internal.content).cost:0))}),[P.shipping,D]),l.createElement(i.Z,{src:m,alt:r.title+" cover",title:r.title+", by "+r.author,description:r.title+", by "+r.author+". "+(r.genre?r.genre+" published in "+r.format+".":"published in "+r.format+".")+" "+g(r.price,"USD")+"."},y?l.createElement("h2",{className:"--muted loading"},"(loading)"):v?l.createElement(l.Fragment,null,l.createElement("h2",null,v),l.createElement("h2",null,"nearly 100% of proceeds go to the author(s)."),l.createElement("h2",null,"if you have any questions about your purchase, email us at"," ",l.createElement("a",{href:"mailto:transactions@9vtbackslash5.com"},"transactions@9vtbackslash5.com"),"."),l.createElement("h2",{className:"ta-right"},l.createElement(o.Link,{to:"/catalogue"},"click here")," to navigate back to our catalogue."),l.createElement("h2",{className:"ta-right"},"or"," ",l.createElement("a",{href:"https://instagram.com/9vtbackslash5",target:"_blank",rel:"noopener noreferrer"},"click here")," ","to checkout our Instagram.")):l.createElement(l.Fragment,null,l.createElement("h1",{className:"italic title"},r.title),l.createElement("h2",{className:"--muted ta-right author"},"by ",r.author),s&&(0,u.Z)(s,b),l.createElement("div",{className:"image image-mobile"},l.createElement(c.G,{image:m,alt:r.title+" cover"})),r.copies&&l.createElement("h2",{className:"--muted"},"this edition is limited to ",r.copies," copies."),r.soldOut?l.createElement("h2",{className:"--muted"},"this publication is sold out"):r.saleEnded?l.createElement("h2",{className:"--muted"},"sales for this publication have ended"):l.createElement(l.Fragment,null,r.preorder&&f()(r.preorderShipDate).isAfter(f()())&&l.createElement("h2",{className:"--muted"},"this publication will ship from"," ",f()(r.preorderShipDate).format("MMMM Do")),l.createElement("h1",null,r.preorder&&f()(r.preorderShipDate).isAfter(f()())?"preorder":"purchase"," ","this publication"),l.createElement("h2",{className:"breakdown"},"cost: ",l.createElement("span",null,g(r.price,"USD"))),l.createElement("h2",{className:"breakdown"},"quantity:"," ",l.createElement("select",{name:"quantity",value:P.quantity,onChange:C},l.createElement("option",{value:1},"1"),l.createElement("option",{value:2},"2"),l.createElement("option",{value:3},"3"))),l.createElement("h2",{className:"breakdown"},"subtotal: ",l.createElement("span",null,g(D,"USD"))),l.createElement("h2",{className:"breakdown"},"tax: ",l.createElement("span",null,100*r.tax,"%")),l.createElement("h2",{className:"breakdown"},"shipping:"," ",l.createElement("select",{name:"shipping",onChange:C,defaultValue:"Select"},l.createElement("option",{value:"Select",disabled:!0},"Select"),r.shipping.map((function(e,t){var n=JSON.parse(e.internal.content);return l.createElement("option",{value:t},g(n.cost,"USD")," ~ shipping to"," ",n.to)})))),l.createElement("h2",{className:"breakdown"},"total: ",l.createElement("span",null,g(N,"USD"))),l.createElement("div",{className:"paypal-btn-wrapper"},l.createElement(d.q,{style:{color:"black"},options:{clientId:"AdracerWWfFWyetVtP-i2c2qb2RV0WQYLX2TKQShPh7s9bxQrtD1pyadLNTQ27VEWGZz4ydTjnqjja0j"},currency:"USD",onError:function(e){"Select"===P.shipping?alert("Please select shipping."):console.log(e)},createOrder:function(e,t){return"Select"===P.shipping?null:t.order.create({purchase_units:[{amount:{currency_code:"USD",value:(N/100).toFixed(2),breakdown:{item_total:{currency_code:"USD",value:(D/100).toFixed(2)},shipping:{currency_code:"USD",value:(JSON.parse(r.shipping[Number(P.shipping)].internal.content).cost/100).toFixed(2)},tax_total:{currency_code:"USD",value:(D*r.tax/100).toFixed(2)}}},items:[{unit_amount:{currency_code:"USD",value:String((r.price/100).toFixed(2))},quantity:P.quantity,name:r.title,description:r.blurb?r.blurb:""}]}]})},onApprove:function(e,t){return t.order.capture().then((function(e){S("Thanks for your purchase, "+e.payer.name.given_name+".")}))}}))),l.createElement("h1",null,"details"),r.editors&&l.createElement("h2",{className:"m-0"},"edited by ",r.editors),r.typesetting&&l.createElement("h2",{className:"m-0"},"typesetting by ",r.typesetting),r.coverDesign&&l.createElement("h2",{className:"m-0"},"cover design by ",r.coverDesign),r.artwork&&l.createElement("h2",{className:"m-0"},"artwork by ",r.artwork),r.publisher&&l.createElement("h2",{className:"m-0"},"printed by ",r.publisher),r.releaseDate&&l.createElement("h2",{className:"m-0"},"published in ",r.releaseDate),r.genre&&l.createElement("h2",{className:"m-0"},r.genre),r.format&&l.createElement("h2",{className:"m-0"},r.format),r.pageCount&&l.createElement("h2",{className:"m-0"},r.pageCount," pages"),r.isbn&&l.createElement("h2",{className:"m-0"},"ISBN: ",r.isbn),r.price&&l.createElement("h2",{className:"m-0"},g(r.price,"USD")),r.copies&&l.createElement("h2",{className:"m-0"},"limited to ",r.copies," copies"),r.soldOut&&l.createElement("h2",{className:"m-0 --muted"},"this publication is sold out"),r.saleEnded&&l.createElement("h2",{className:"m-0 --muted"},"sales for this publication have ended"),l.createElement("h2",{className:"ta-right"},l.createElement(o.Link,{to:"/catalogue"},"click here")," to navigate back to our catalogue.")))}}}]);
//# sourceMappingURL=component---src-templates-publication-js-a4f5bde8f61cde33d797.js.map